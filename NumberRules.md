# 停车王车牌号码专用键盘规则和设计说明

`2017.11` / `西安艾润物联` / `陈永佳 (chenyongjia@parkingwang.com)`

------

## 一、车牌号码规则

根据我们停车王产品线情况，在`停车王（KOP）`、`停车王管理端（IOP）`、`停车王商户端(ECP)`项目上使用民用+警队车牌规则，在`停车王收费端（PAD）`项目上需要支持全部车牌规则类型。

### 1.1 民用车牌规则

#### 普通车牌（蓝牌、黄牌）

车牌号码长度：7 位

车牌号码格式：

| 第1位  | 第2位    | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  |
| ---- | ------ | ---- | ---- | ---- | ---- | ---- |
| 省份简称 | 发证机关代码 | 号码   | 号码   | 号码   | 号码   | 号码   |

省份简称：

> 京津晋冀蒙辽吉黑沪苏浙皖闽赣鲁豫鄂湘粤桂琼渝川贵云藏陕甘青宁新

发证机关代码：

> ABCDEFGH`x`JKLMN`x`PQRSTUVWXY
>
> 说明：无 `I, O , Z` 三个字母。其中**O**和**Z**属于特殊车牌类型，见其它类型说明。

车牌号码：

> 数字：0123456789
>
> 字母：ABCDEFGH`x`JKLNM`x`PQRSTUVWXY
>
> 说明：无 `I, O` 字母；

民用车牌参考信息：[百度百科-车牌号](https://baike.baidu.com/item/%E8%BD%A6%E7%89%8C%E5%8F%B7/1170490)

------

#### 新能源车牌

车牌号码长度：8 位

车牌号码格式：

| 第1位  | 第2位  | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  | 第8位  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 省份   | 发证机关 | 号码   | 号码   | 号码   | 号码   | 号码   | 号码   |

新能源车牌现阶段号码长度为8位，按照现行新能源车牌号码规则：

- 第3位：`1-9DF`
- 第4位：`1-9A-Z`，无`I`、`O`字母；
- 第5-7位：`0-9`
- 第8位：`1-9DF`

严格校验新能源车牌号码的约束规则：

1. 当第3位为`D/F`时，第4位可字母和数字，第5-8位必须纯数字；
2. 当第8位为`D/F`时，第3-7位必须纯数字；

------

### 1.2 民用特殊车牌规则

#### 港澳车牌

车牌号码长度：7 位

车牌号码格式：

| 第1位  | 第2位  | 第3位  | 第4位  | 第5位  | 第6位  | 第7位    |
| ---- | ---- | ---- | ---- | ---- | ---- | ------ |
| `粤`  | `Z`  | 号码   | 号码   | 号码   | 号码   | `[港澳]` |

第1、2位分别是“粤Z”，第7位为“港澳”。

#### 其它第7位特殊字符说明

- `学` 教练车；
- `挂` 全挂车和不与牵引车固定使用的半挂车；
- `领` 外国驻华领事馆车牌；
- `试` 试驾车，临牌；
- `超` 特型机动车的临时行驶车号牌，临牌； 

参考链接：[百度百科-车牌](https://baike.baidu.com/item/%E8%BD%A6%E7%89%8C/8347320?fr=aladdin#1)

#### 民航内部车牌

车牌号码长度：7 位

车牌号码格式：

| 第1位  | 第2位  | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| `民`  | `航`  | 号码   | 号码   | 号码   | 号码   | 号码   |

#### 使馆车牌

车牌号码长度：7 位

新式使馆车牌号码格式：

| 第1位     | 第2位  | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  |
| ------- | ---- | ---- | ---- | ---- | ---- | ---- |
| `[1-3]` | 数字   | 数字   | 号码   | 号码   | 号码   | `使`  |

旧式使馆车牌号码格式：

| 第1位  | 第2位     | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  |
| ---- | ------- | ---- | ---- | ---- | ---- | ---- |
| `使`  | `[1-3]` | 数字   | 数字   | 号码   | 号码   | 号码   |

这个类型的车牌于2017年5月左右取消，更换成新式使馆车牌。参见新闻链接:[http://society.cnr.cn/js/20170214/t20170214_523597660.html](http://society.cnr.cn/js/20170214/t20170214_523597660.html)

------

### 1.3 警队车牌规则

警队车牌包括四种车牌：

- 2012式武警车牌；
- 普通警察车牌；
- O字警察车牌；

#### 2012式武警车牌

车牌号码长度：8 位

车牌号码格式：

| 第1位  | 第2位  | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  | 第8位  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| `W`  | `J`  | 省份简称 | 号码   | 号码   | 号码   | 号码   | `警种`   |

其中号码字段，保持与普通车牌号码一致。

警种编码

| 编码  | 说明  |
| ---- | ---- |
| `0-9`  | 内卫部队  |
| `X`  | 消防部队  |
| `B`  | 边防部队  |
| `T`  | 交通部队  |
| `S`  | 森林部队  |
| `H`  | 黄金部队  |
| `J`  | 警卫部队  |
| `D`  | 水电部队  |

参考资料：[武警部队于6月1日正式启用新式车辆牌证](http://mil.news.sina.com.cn/2013-06-03/1009726804.html)

例如：

```
- WJ京1234X
- WJ粤12345
```

#### 普通警察车牌

车牌号码长度：7 位

车牌号码格式：

| 第1位  | 第2位  | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 省份   | 发证机关 | 号码   | 号码   | 号码   | 号码   | `警`  |

其中第7位固定为“警”字，其它位置与普通车牌号码一致；

#### O字警用车牌民用号段

车牌号码长度：7 位

车牌号码格式：

| 第1位  | 第2位  | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 省份   | `O`  | 号码   | 号码   | 号码   | 号码   | 号码   |

其中第1位固定为字母“O”，其它位置与普通车牌号码一致。

> 注：此类似车牌已基本在全国范围内取消，但部分地区仍有使用情况。

------

### 1.4 军队车牌规则

车牌号码长度：7 位

车牌号码格式：

| 第1位    | 第2位    | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  |
| ------ | ------ | ---- | ---- | ---- | ---- | ---- |
| 军区军种代码 | `单位代码` | 号码   | 号码   | 号码   | 号码   | 号码   |

军区代码：

> QVKHBSLJNGCEZ

代表各大军区、总部、军种：

- `Q` 战区首字母（新式）
- `VKHBSLJNGCEZ` 旧式军区车牌前缀。**后期根据军队车牌情况可能只保存“Q”字母。**

单位代码：

> 与普通民用车牌发证机关代码的字母一致，未做严格限制。

------

## 二、车牌组件设计说明

车牌组件的字符输入框如下：

| 第1位  | 第2位  | 第3位  | 第4位  | 第5位  | 第6位  | 第7位  | 第8位  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 省份简称 | 发证机关 | 号码   | 号码   | 号码   | 号码   | 号码   | 号码   |

### 2.1 键盘初始化

1. 初始化时，无车牌号码：

   > 显示7位输入框，默认选中第1位输入框，键盘根据指定类型显示对应的省份键位表；
   >
   > 设置：新能源车牌锁定按钮为“普通车牌”状态

2. 初始化时，指定车牌号码，有以下情况：

   - 普通车牌号码：

     > 显示 **7** 位输入框，默认选中第1位输入框，键盘根据指定类型显示对应的省份键位表；
     >
     > 设置：新能源车牌锁定按钮为“普通车牌”状态

   - 新能源车牌号码：

     > 显示 **8** 位输入框，默认选中第1位输入框，键盘根据指定类型显示对应的省份键位表；
     >
     > 设置：新能源车牌锁定按钮为**“新能源车牌”**状态

   - 武警地方警队车牌号码：

     > 显示 **8** 位输入框，默认选中第1位输入框，键盘根据指定类型显示对应的省份键位表；
     >
     > 设置：新能源车牌锁定按钮为“普通车牌”状态

### 2.2 键盘操作

1. 除最末位(*<u>根据车牌类型的字符长度第7位或第8位</u>*)外，点击键盘键位后修改当前选中的输入框字符，并自动跳到下一个输入框；
2. 在最末位(*<u>根据车牌类型的字符长度第7位或第8位</u>*)时，修改当前输入框字符不做任何跳转，重复修改当前输入框字符；
3. 删除操作时，无论当前选中输入框在哪一位，均从最后一个非空输入框开始删除，直到全部为空。（此时键盘的删除键位应当不可点击）。

### 2.3 新能源车牌类型锁定操作

在车牌组件中的“新能源车牌锁定”按钮，其作用是：

> 锁定车牌类型为“新能源车牌”类型。

1. 在普通车牌状态下，点击按钮`锁定`，切换为新能源车牌类型时，需要检查当前已输入车牌号码*（长度不足时补0）*是否符合新能源车牌规则。不符合时提示用户“当前车牌不符合新能源车牌规则\n 请删除后再切换类型”。符合规则时：
   - 输入框长度增加`1`位；
   - 当前选中最末位（第7位）时，如果当前输入框**已有字符**，变更为选中第8位；
   - 当前选中最末位（第7位）时，如果当前输入框**没有字符**，保持当前选中状态不变；
   - 当选中其它位置时，保持选中状态不变；
2. 在新能源车牌类型状态下，点击按钮`取消锁定`，切换为普通车牌类型时：
   - 输入框长度减少`1`位；
   - 当前选中最末位（第8位）时，变更为选中第7位；
   - 当前选中其它位置时，保持选中状态不变；

## 三、版本变更说明

**2017.11.17 | 陈永佳**

- 更新车牌号码最末位特定字符的车辆类型说明；
- 移除车牌号码最末位字符“练”，未找到对应的车辆类型说明；

**2017.11.01 | 陈永佳**

- 更新新能源车牌的规则描述；

**2017.10.26 | 陈永佳**

- 完成“车牌号码规则”、“车牌组件设计说明”信息录入；